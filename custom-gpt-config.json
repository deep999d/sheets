{
  "name": "Legendary Homes Jobsite Task Manager",
  "description": "Converts voice/text input into structured construction tasks and manages them in Google Sheets",
  "instructions": "You are an AI assistant for Legendary Homes construction management. Your role is to:\n\n1. Parse natural language input (voice or text) from supervisors into structured task data\n2. Extract key information: Project, Area, Trade, Task Title, Details, Assigned To, Priority, Due Date, Photo Needed\n3. Support multiple tasks in one conversation (separated by 'also', 'next', 'then', etc.)\n4. Use smart inference:\n   - Trade names: 'tile' → Tile, 'masonry' → Masonry, 'plumbing' → Plumbing, etc.\n   - Dates: 'end of week' → Friday, 'next week' → calculate date, 'Friday' → specific Friday\n   - Priorities: 'urgent', 'asap' → High, 'whenever' → Low\n5. Always confirm task details before saving (show preview)\n6. Use the Google Sheets Actions to save tasks to both Master Tasks tab and project-specific tabs\n7. When a new project is mentioned, verify if a tab exists, and if not, guide the user to create one\n\nBe conversational, helpful, and ensure data accuracy before committing to the spreadsheet.",
  "model": "gpt-4",
  "temperature": 0.3,
  "actions": [
    {
      "name": "add_task_to_sheets",
      "description": "Adds a new task to Google Sheets in both the Master Tasks tab and the appropriate project tab",
      "parameters": {
        "type": "object",
        "properties": {
          "project": {
            "type": "string",
            "description": "Project/home name (e.g., 'Grandin', 'Maple Street')"
          },
          "area": {
            "type": "string",
            "description": "Area of the home (e.g., 'Kitchen', 'Master Bath', 'Rear Retaining Wall')"
          },
          "trade": {
            "type": "string",
            "description": "Trade/subcontractor type (e.g., 'Masonry', 'Tile', 'Plumbing', 'Electrical', 'Carpentry')"
          },
          "taskTitle": {
            "type": "string",
            "description": "Brief task title (e.g., 'Chipped Block', 'Leaky Faucet')"
          },
          "taskDetails": {
            "type": "string",
            "description": "Detailed description of the task"
          },
          "assignedTo": {
            "type": "string",
            "description": "Person or company assigned (e.g., 'Masonry', 'John Smith', 'ABC Plumbing')"
          },
          "priority": {
            "type": "string",
            "enum": ["Low", "Medium", "High", "Urgent"],
            "description": "Task priority level"
          },
          "dueDate": {
            "type": "string",
            "description": "Due date in YYYY-MM-DD format"
          },
          "photoNeeded": {
            "type": "boolean",
            "description": "Whether a photo is needed for this task"
          }
        },
        "required": ["project", "taskTitle", "trade", "assignedTo"]
      }
    },
    {
      "name": "get_tasks",
      "description": "Retrieves tasks from Google Sheets, optionally filtered by project, trade, assignedTo, or due date",
      "parameters": {
        "type": "object",
        "properties": {
          "project": {
            "type": "string",
            "description": "Filter by project name"
          },
          "trade": {
            "type": "string",
            "description": "Filter by trade"
          },
          "assignedTo": {
            "type": "string",
            "description": "Filter by assigned person/company"
          },
          "status": {
            "type": "string",
            "enum": ["Open", "In Progress", "Completed"],
            "description": "Filter by task status"
          }
        }
      }
    },
    {
      "name": "create_project_tab",
      "description": "Creates a new project tab in the Google Sheet",
      "parameters": {
        "type": "object",
        "properties": {
          "projectName": {
            "type": "string",
            "description": "Name of the new project"
          }
        },
        "required": ["projectName"]
      }
    },
    {
      "name": "get_subcontractor_tasks",
      "description": "Gets all open tasks for a specific subcontractor/trade for email generation",
      "parameters": {
        "type": "object",
        "properties": {
          "assignedTo": {
            "type": "string",
            "description": "Subcontractor name or trade"
          }
        },
        "required": ["assignedTo"]
      }
    }
  ],
  "capabilities": {
    "code_interpreter": false,
    "web_browsing": false,
    "function_calling": true
  }
}

